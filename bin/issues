#!/usr/bin/env python

from github import Github
import issues

def print_issues(i):
    for issue in i:
        print "* %s" % issue.title

def main(token, repo_list, milestone_name):
    g = Github(token)
    for r in repo_list:
        repo = g.get_repo('basho/%s' % r)
        m = issues.milestone_by_name(repo, milestone_name)
        print '===> Processing repo %s' % r
        print_issues(issues.open_issues_in_milestone(repo, m))
        print '\n'

if __name__ == '__main__':
    import sys
    token = sys.argv[1]
    repo_list = sys.argv[2:]
    main(token, repo_list, '2.0')
